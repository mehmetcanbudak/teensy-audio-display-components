get_filename_component(CURRENT_FOLDER_NAME ${CMAKE_SOURCE_DIR} NAME)

if (DEFINED BUILD_FOR_OPENGL_EMULATOR)
    if(CURRENT_FOLDER_NAME STREQUAL "examples")
        include_directories(${CMAKE_SOURCE_DIR} ../src)
    elseif(CURRENT_FOLDER_NAME STREQUAL "teensy-audio-display-components")
        include_directories(${CMAKE_SOURCE_DIR} src)
    else()
        include_directories(${CMAKE_SOURCE_DIR} ../../src)
    endif()
else()
    if(CURRENT_FOLDER_NAME STREQUAL "examples")
        import_arduino_library(${CMAKE_SOURCE_DIR} ../src)
    elseif(CURRENT_FOLDER_NAME STREQUAL "teensy-audio-display-components")
        import_arduino_library(${CMAKE_SOURCE_DIR} src)
    else()
        import_arduino_library(${CMAKE_SOURCE_DIR} ../../src)
    endif()
endif()